apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    argocd.argoproj.io/sync-wave: '-10'
    cilium.syn.tools/description: Generated policy to configure egress interface "egress_c_29"
      for shadow range "198.51.100.96 - 198.51.100.127" associated with egress range
      "egress_c" (192.0.2.64 - 192.0.2.95) on node "infra-8344".
  labels:
    cilium.syn.tools/egress-policy: baz
    name: egress-interface-baz-infra-8344
  name: egress-interface-baz-infra-8344
spec:
  desiredState:
    interfaces:
      - ipv4:
          address:
            - ip: 198.51.100.125
              prefix-length: 32
          dhcp: false
          enabled: true
        name: egress_c_29
        type: dummy
  nodeSelector:
    kubernetes.io/hostname: infra-8344
---
apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    argocd.argoproj.io/sync-wave: '-10'
    cilium.syn.tools/description: Generated policy to configure egress interface "egress_c_29"
      for shadow range "198.51.100.128 - 198.51.100.159" associated with egress range
      "egress_c" (192.0.2.64 - 192.0.2.95) on node "infra-87c9".
  labels:
    cilium.syn.tools/egress-policy: baz
    name: egress-interface-baz-infra-87c9
  name: egress-interface-baz-infra-87c9
spec:
  desiredState:
    interfaces:
      - ipv4:
          address:
            - ip: 198.51.100.157
              prefix-length: 32
          dhcp: false
          enabled: true
        name: egress_c_29
        type: dummy
  nodeSelector:
    kubernetes.io/hostname: infra-87c9
---
apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    argocd.argoproj.io/sync-wave: '-10'
    cilium.syn.tools/description: Generated policy to configure egress interface "egress_c_29"
      for shadow range "198.51.100.160 - 198.51.100.191" associated with egress range
      "egress_c" (192.0.2.64 - 192.0.2.95) on node "infra-eba2".
  labels:
    cilium.syn.tools/egress-policy: baz
    name: egress-interface-baz-infra-eba2
  name: egress-interface-baz-infra-eba2
spec:
  desiredState:
    interfaces:
      - ipv4:
          address:
            - ip: 198.51.100.189
              prefix-length: 32
          dhcp: false
          enabled: true
        name: egress_c_29
        type: dummy
  nodeSelector:
    kubernetes.io/hostname: infra-eba2
---
apiVersion: cilium.io/v2
kind: CiliumEgressGatewayPolicy
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true,Prune=false
    cilium.syn.tools/debug-interface-index: start=3221226016, end=3221226047, ip=3221226045
    cilium.syn.tools/description: Generated policy to assign egress IP 192.0.2.61
      in egress range "egress_a" (192.0.2.32 - 192.0.2.63) to namespace bar.
    cilium.syn.tools/egress-ip: 192.0.2.61
    cilium.syn.tools/egress-range: 192.0.2.32 - 192.0.2.63
    cilium.syn.tools/interface-prefix: egress_a
    cilium.syn.tools/shadow-ips: '["198.51.100.29","198.51.100.61","198.51.100.93"]'
    cilium.syn.tools/source-namespace: bar
  labels:
    cilium.syn.tools/test: additional-policy-label
    name: bar
  name: bar
spec:
  destinationCIDRs:
    - 0.0.0.0/0
  egressGroups:
    - interface: egress_a_29
      nodeSelector:
        matchLabels:
          node-role.kubernetes.io/infra: ''
  selectors:
    - podSelector:
        matchLabels:
          io.kubernetes.pod.namespace: bar
---
apiVersion: cilium.io/v2
kind: CiliumEgressGatewayPolicy
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true,Prune=false
    cilium.syn.tools/debug-interface-index: start=3221226048, end=3221226079, ip=3221226077
    cilium.syn.tools/description: Generated policy to assign egress IP 192.0.2.93
      in egress range "egress_c" (192.0.2.64 - 192.0.2.95) to namespace baz.
    cilium.syn.tools/egress-ip: 192.0.2.93
    cilium.syn.tools/egress-range: 192.0.2.64 - 192.0.2.95
    cilium.syn.tools/interface-prefix: egress_c
    cilium.syn.tools/shadow-ips: '["198.51.100.125","198.51.100.157","198.51.100.189"]'
    cilium.syn.tools/source-namespace: baz
  labels:
    name: baz
  name: baz
spec:
  destinationCIDRs:
    - 203.0.113.0/24
  egressGroups:
    - interface: egress_c_29
      nodeSelector:
        matchLabels:
          node-role.kubernetes.io/infra: ''
  selectors:
    - podSelector:
        matchLabels:
          io.kubernetes.pod.namespace: baz
---
apiVersion: cilium.io/v2
kind: CiliumEgressGatewayPolicy
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true,Prune=false
    cilium.syn.tools/debug-interface-index: start=3221226016, end=3221226047, ip=3221226016
    cilium.syn.tools/description: Generated policy to assign egress IP 192.0.2.32
      in egress range "egress_a" (192.0.2.32 - 192.0.2.63) to namespace foo.
    cilium.syn.tools/egress-ip: 192.0.2.32
    cilium.syn.tools/egress-range: 192.0.2.32 - 192.0.2.63
    cilium.syn.tools/interface-prefix: egress_a
    cilium.syn.tools/shadow-ips: '["198.51.100.0","198.51.100.32","198.51.100.64"]'
    cilium.syn.tools/source-namespace: foo
  labels:
    cilium.syn.tools/test: additional-policy-label
    name: foo
  name: foo
spec:
  destinationCIDRs:
    - 0.0.0.0/0
  egressGroups:
    - interface: egress_a_0
      nodeSelector:
        matchLabels:
          node-role.kubernetes.io/infra: ''
  selectors:
    - podSelector:
        matchLabels:
          io.kubernetes.pod.namespace: foo
---
apiVersion: cilium.io/v2
kind: CiliumEgressGatewayPolicy
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true,Prune=false
    cilium.syn.tools/description: Generated policy to assign BGP egress IP 192.0.2.160
      in egress range "egress_f" (192.0.2.160 - 192.0.2.190) to namespace qux.
    cilium.syn.tools/egress-ip: 192.0.2.160
    cilium.syn.tools/egress-range: 192.0.2.160 - 192.0.2.190
    cilium.syn.tools/experimental-policy: 'true'
    cilium.syn.tools/interface-prefix: egress_f
    cilium.syn.tools/source-namespace: qux
  labels:
    cilium.syn.tools/egress-ip: bgp
    name: qux
  name: qux
spec:
  destinationCIDRs:
    - 203.0.113.0/25
  egressCIDRs:
    - 192.0.2.160/32
  egressGroups:
    - maxGatewayNodes: 1
      nodeSelector:
        matchLabels:
          node-role.kubernetes.io/infra: ''
  selectors:
    - podSelector:
        matchLabels:
          io.kubernetes.pod.namespace: qux
