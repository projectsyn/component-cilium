parameters:
  cilium:
    =_metadata: {}
    =_namespace: cilium
    release_name: cilium

    # Possible values "olm", "helm"
    install_method: helm
    # Possible values "opensource", "enterprise"
    # Enterprise is currently only supported for "helm"
    release: opensource

    cilium_helm_values:
      cni:
        binPath: /var/lib/cni/bin
        confPath: /var/run/multus/cni/net.d
      endpointRoutes:
        enabled: true
      hubble:
        tls:
          enabled: false
      ipam:
        mode: cluster-pool
        operator:
          clusterPoolIPv4MaskSize: "23"
          clusterPoolIPv4PodCIDR: 10.128.0.0/14
      kubeProxyReplacement: probe
      prometheus:
        serviceMonitor:
          enabled: false
      operator:
        resources:
          requests:
            cpu: 100m
            memory: 250Mi
          limits:
            cpu: 100m
            memory: 250Mi

    olm:
      source:
        opensource: https://github.com/cilium/cilium-olm/archive/master.tar.gz
        enterprise: <CILIUM-ENTERPRISE-OLM-MANIFESTS-TARGZ-URL> # Configure the URL in your global defaults.
      version: "1.10"
      patchlevel: "4"
      full_version: ${cilium:olm:version}.${cilium:olm:patchlevel}
      resources:
        requests:
          cpu: 100m
          memory: 250Mi
        limits:
          cpu: 100m
          memory: 250Mi

    charts:
      cilium:
        source: https://helm.cilium.io
        version: "1.10.11"
      cilium-enterprise:
        source: "<CILIUM-ENTERPRISE-CHART-REPO-URL>" # Configure the Chart repository URL in your global defaults
        version: "1.10.11"

    =_helm_values:
      opensource: ${cilium:cilium_helm_values}

      enterprise:
        cilium: ${cilium:cilium_helm_values}
        hubble-enterprise:
          enabled: false
          enterprise:
            enabled: false
        hubble-ui:
          enabled: false

    helm_values:
      ${cilium:_helm_values:${cilium:release}}
